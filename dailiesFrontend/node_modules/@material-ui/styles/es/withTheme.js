import _extends from "@babel/runtime/helpers/extends";
import _objectWithoutPropertiesLoose from "@babel/runtime/helpers/objectWithoutPropertiesLoose";
import React from 'react';
import PropTypes from 'prop-types';
import hoistNonReactStatics from 'hoist-non-react-statics';
import { getDisplayName } from '@material-ui/utils';
import { ThemeContext } from './ThemeProvider'; // Provide the theme object as a property to the input component.

const withTheme = () => Component => {
  const WithTheme = props => React.createElement(ThemeContext.Consumer, null, theme => {
    const {
      innerRef
    } = props,
          other = _objectWithoutPropertiesLoose(props, ["innerRef"]);

    return React.createElement(Component, _extends({
      theme: theme,
      ref: innerRef
    }, other));
  });

  WithTheme.propTypes = process.env.NODE_ENV !== "production" ? {
    /**
     * Use that property to pass a ref callback to the decorated component.
     */
    innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.object])
  } : {};

  if (process.env.NODE_ENV !== 'production') {
    WithTheme.displayName = `WithTheme(${getDisplayName(Component)})`;
  }

  hoistNonReactStatics(WithTheme, Component);
  return WithTheme;
};

export default withTheme;